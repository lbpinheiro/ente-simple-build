# Ente Museum Server Configuration for Production
# This file will be mounted into the museum container

# Logging configuration for production
log-file: /var/logs/museum.log

# HTTP configuration for production
http:
  # TLS will be handled by the reverse proxy (Coolify/Traefik)
  use-tls: false

# App base endpoints - these will be set via environment variables in Coolify
apps:
  public-albums: ${SERVICE_FQDN_WEB_3002}
  cast: ${SERVICE_FQDN_WEB_3004}
  accounts: ${SERVICE_FQDN_WEB_3001}
  family: ${SERVICE_FQDN_WEB_3000}

# Database configuration - credentials loaded from environment variables
db:
  host: postgres
  port: 5432
  name: ${POSTGRES_DB:-ente}
  sslmode: disable
  user: $SERVICE_USER_POSTGRES
  password: $SERVICE_PASSWORD_POSTGRES

# S3 Configuration for local MinIO
s3:
  # Enable local bucket mode for MinIO
  are_local_buckets: true
  
  # Use path-style URLs for MinIO compatibility
  use_path_style_urls: true
  
  # Hot storage configuration
  hot_storage:
    primary: b2-eu-cen
    secondary: wasabi-eu-central-2-v3
  
  # Bucket configurations
  b2-eu-cen:
    key: $SERVICE_USER_MINIO
    secret: $SERVICE_PASSWORD_MINIO
    endpoint: localhost:3200
    region: eu-central-2
    bucket: b2-eu-cen
  
  wasabi-eu-central-2-v3:
    key: $SERVICE_USER_MINIO
    secret: $SERVICE_PASSWORD_MINIO
    endpoint: localhost:3200
    region: eu-central-2
    bucket: wasabi-eu-central-2-v3
    compliance: false
  
  scw-eu-fr-v3:
    key: $SERVICE_USER_MINIO
    secret: $SERVICE_PASSWORD_MINIO
    endpoint: localhost:3200
    region: eu-central-2
    bucket: scw-eu-fr-v3

# Encryption keys - loaded from environment variables
key:
  encryption: ${ENCRYPTION_KEY}
  hash: ${HASH_KEY}

# JWT configuration
jwt:
  secret: ${JWT_SECRET}

# WebAuthn configuration for 2FA (optional)
webauthn:
  rpid: vm.lucasdesenv.com
  rporigins:
    - ${SERVICE_FQDN_WEB_3000}

# Internal configuration
internal:
  # Set to false for production to enable notifications
  silent: false
  
  # Admin configuration
  admins: []
  
  # Allow user registration (set to true to disable)
  disable-registration: false

# SMTP configuration (optional - configure if you want email notifications)
# smtp:
#   host: ${SMTP_HOST}
#   port: ${SMTP_PORT}
#   username: ${SMTP_USERNAME}
#   password: ${SMTP_PASSWORD}
#   email: ${SMTP_FROM_EMAIL}

# Replication configuration (disabled by default for self-hosting)
replication:
  enabled: false

# Background jobs configuration
jobs:
  cron:
    skip: false
  remove-unreported-objects:
    worker-count: 1
  clear-orphan-objects:
    enabled: false
